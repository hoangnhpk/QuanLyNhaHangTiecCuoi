@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@{
    ViewData["Title"] = "Trang Chủ";
}

<section id="hero" class="hero section dark-background"
         style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://dp1.diamondplace.vn/wp-content/uploads/2022/05/LONG1770-min.jpg') center/cover;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 d-flex flex-column align-items-center align-items-lg-start">
                <h2 data-aos="fade-up" data-aos-delay="100" style="color: #fff;">
                    Chào mừng đến với<span style="color: #cda45e;"> Long Phụng</span>
                </h2>
                <p data-aos="fade-up" data-aos-delay="200" style="color: rgba(255,255,255,0.8);">
                    Phục vụ tiệc cưới tuyệt vời hơn 18 năm kinh nghiệm!
                </p>
                <div class="d-flex mt-4" data-aos="fade-up" data-aos-delay="300">
                    <a href="#menu" class="cta-btn" style="color: #fff; border: 2px solid #cda45e; padding: 10px 30px; border-radius: 50px; text-decoration: none; margin-right: 15px;">Thực Đơn</a>
                    <a href="#book-a-table" class="cta-btn" style="color: #fff; border: 2px solid #cda45e; padding: 10px 30px; border-radius: 50px; text-decoration: none;">Đặt Tiệc</a>
                </div>
            </div>
            <div class="col-lg-4 d-flex align-items-center justify-content-center mt-5 mt-lg-0">
                <a href="https://youtu.be/NkLavXp-7JM" class="glightbox pulsating-play-btn"></a>
            </div>
        </div>
    </div>
</section>

<section id="about" class="about section">
    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4">
            <div class="col-lg-6 order-1 order-lg-2">
                <img src="https://cdn.hoabinhevents.com/hbe/1-ban-tiec-cuoi-gia-bao-nhieu-1.jpeg"
                     class="img-fluid about-img" alt="Về nhà hàng"
                     style="width: 100%; border: 6px solid rgba(255,255,255,0.2);">
            </div>
            <div class="col-lg-6 order-2 order-lg-1 content">
                <h3>Chất lượng đáng tin cậy</h3>
                <p class="fst-italic">
                    Chúng tôi cam kết mang đến bữa tiệc cưới vui vẻ, ngon miệng cùng các món ăn do các đầu bếp ưu tú thực hiện.
                </p>
                <ul>
                    <li><i class="bi bi-check2-all"></i> <span>Không gian sang trọng, trang trí theo yêu cầu.</span></li>
                    <li><i class="bi bi-check2-all"></i> <span>Đội ngũ đầu bếp giàu kinh nghiệm.</span></li>
                    <li><i class="bi bi-check2-all"></i> <span>Âm thanh - ánh sáng hiện đại.</span></li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section id="menu" class="menu section">
    <div class="container section-title" data-aos="fade-up">
        <h2>Thực Đơn</h2>
        <p>Khám phá thực đơn hấp dẫn của chúng tôi</p>
    </div>
    <div class="container isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">
        <div class="row" data-aos="fade-up" data-aos-delay="100">
            <div class="col-lg-12 d-flex justify-content-center">
                <ul class="menu-filters isotope-filters">
                    <li data-filter="*" class="filter-active">Tất cả</li>
                    <li data-filter=".filter-starters">Khai vị</li>
                    <li data-filter=".filter-salads">Salad</li>
                    <li data-filter=".filter-specialty">Đặc biệt</li>
                </ul>
            </div>
        </div>
        <div class="row isotope-container" data-aos="fade-up" data-aos-delay="200">
            <div class="col-lg-6 menu-item isotope-item filter-starters">
                <img src="https://images.unsplash.com/photo-1625944230945-1b7dd3b949ab?w=200" class="menu-img" alt="">
                <div class="menu-content">
                    <a href="#">Súp Tôm Hùm</a><span>145.000₫</span>
                </div>
                <div class="menu-ingredients">Tôm hùm, kem tươi, rượu vang.</div>
            </div>
        </div>
    </div>
</section>

<section id="book-a-table" class="book-a-table section">
    <div class="container section-title" data-aos="fade-up">
        <h2>ĐẶT TIỆC</h2>
        <p>Đặt tiệc ngay</p>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success text-center">@TempData["SuccessMessage"]</div>
    }

    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4">
            <div class="col-lg-6 reservation-img"
                 style="background-image: url('https://huongpho.com.vn/wp-content/uploads/2018/05/nha-hang-tiec-cuoi-uy-tin.jpg'); min-height: 500px; background-size: cover; background-position: center;">
            </div>

            <div class="col-lg-6 reservation-form-bg">
                <form asp-controller="DatTiec" asp-action="DatTiec" method="post" role="form">
                    <div class="row gy-4">
                        <div class="col-lg-6 col-md-6">
                            <input type="text" name="HoTen" class="form-control"
                                   placeholder="Họ và tên người đặt" required
                                   value="@HttpContextAccessor.HttpContext.Session.GetString("TenKhachHang")">
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <input type="text" class="form-control" name="SDT"
                                   placeholder="Số điện thoại" required
                                   value="@HttpContextAccessor.HttpContext.Session.GetString("SdtKhachHang")">
                        </div>
                        <div class="col-lg-12 col-md-12">
                            <input type="email" class="form-control" name="Email"
                                   placeholder="Email"
                                   value="@HttpContextAccessor.HttpContext.Session.GetString("EmailKhachHang")">
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <input type="text" name="TenCoDau" class="form-control" placeholder="Tên cô dâu" required>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <input type="text" name="TenChuRe" class="form-control" placeholder="Tên chú rể" required>
                        </div>
                        <input type="hidden" name="LoaiThucDon" id="inputLoaiThucDon" />
                        <input type="hidden" name="LoaiDichVu" id="inputLoaiDichVu" />
                        <div class="col-lg-12 col-md-12">
                            <input type="date" name="NgayToChuc" class="form-control" required>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <input type="number" class="form-control" name="SoBanDat" placeholder="Số bàn muốn đặt" required>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <input type="number" class="form-control" name="SoBanDuPhong" placeholder="Số bàn dự phòng">
                        </div>
                    </div>

                    <div class="form-group mt-3">
                        <div class="row gy-4">
                            <div class="col-lg-6 col-md-6">
                                <button type="button" class="form-control btn-chon-modal" data-bs-toggle="modal" data-bs-target="#thucDonModal">
                                    Chọn Thực Đơn
                                </button>
                            </div>
                            <div class="col-lg-6 col-md-6">
                                <button type="button" class="form-control btn-chon-modal" data-bs-toggle="modal" data-bs-target="#dichVuModal">
                                    Chọn Dịch Vụ
                                </button>
                            </div>
                        </div>
                    </div>

                    <input type="hidden" name="GhiChu" id="ghiChuInput" />

                    <div class="text-center mt-3">
                        <button type="submit">Đặt Tiệc Ngay</button>
                    </div>

                    <div class="container">
                        @if (TempData["SuccessMessage"] != null)
                        {
                            <div class="alert alert-success text-center">
                                @TempData["SuccessMessage"]
                            </div>
                        }

                        @if (TempData["ErrorMessage"] != null)
                        {
                            <div class="alert alert-danger text-center">
                                @TempData["ErrorMessage"]
                            </div>
                        }
                    </div>
                    <div class="container" data-aos="fade-up" data-aos-delay="100">
                </form>
            </div>
        </div>
    </div>
</section>

<section id="contact" class="contact section">
    <div class="container section-title" data-aos="fade-up">
        <h2>Liên Hệ</h2>
        <p>Liên hệ với chúng tôi</p>
    </div>
    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4">
            <div class="col-lg-4">
                <div class="info-item d-flex" data-aos="fade-up" data-aos-delay="300">
                    <i class="bi bi-geo-alt flex-shrink-0"></i>
                    <div>
                        <h3>Địa chỉ</h3>
                        <p>99 Nguyễn Văn Linh, Buôn Ma Thuột</p>
                    </div>
                </div>
                <div class="info-item d-flex" data-aos="fade-up" data-aos-delay="400">
                    <i class="bi bi-telephone flex-shrink-0"></i>
                    <div>
                        <h3>Điện thoại</h3>
                        <p>+84 909 123 456</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <form action="" method="post" class="php-email-form">
                    <div class="row gy-4">
                        <div class="col-md-6"><input type="text" name="name" class="form-control" placeholder="Tên của bạn" required></div>
                        <div class="col-md-6"><input type="email" class="form-control" name="email" placeholder="Email" required></div>
                        <div class="col-md-12"><textarea class="form-control" name="message" rows="6" placeholder="Nội dung" required></textarea></div>
                        <div class="col-md-12 text-center"><button type="submit">Gửi tin nhắn</button></div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="thucDonModal" tabindex="-1" aria-labelledby="thucDonModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable">
        <div class="modal-content" style="background-color: #29261f; color: rgba(255, 255, 255, 0.7);">
            <div class="modal-header" style="border-bottom-color: rgba(255, 255, 255, 0.1);">
                <h5 class="modal-title" id="thucDonModalLabel" style="color: #fff;">Chọn Thực Đơn</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="menu-item-card" id="cardVang" onclick="chonThucDon('Vàng')"
                             style="border: 1px solid #444; padding: 15px; border-radius: 8px; cursor: pointer;">
                            <h5 style="color: #cda45e;">Thực Đơn Vàng</h5>
                            <p>1.000.000 VNĐ/bàn</p>
                            <p class="text-muted" style="font-size: 12px;">(Gồm 5 món sang trọng)</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="menu-item-card" id="cardBachKim" onclick="chonThucDon('Bạch Kim')"
                             style="border: 1px solid #444; padding: 15px; border-radius: 8px; cursor: pointer;">
                            <h5 style="color: #cda45e;">Thực Đơn Bạch Kim</h5>
                            <p>2.000.000 VNĐ/bàn</p>
                            <p class="text-muted" style="font-size: 12px;">(Gồm 5 món LUXURY)</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top-color: rgba(255, 255, 255, 0.1);">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" style="background-color: #cda45e; border: none;">Xác nhận</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="dichVuModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" style="background-color: #29261f; color: rgba(255, 255, 255, 0.7);">
            <div class="modal-header" style="border-bottom-color: rgba(255, 255, 255, 0.1);">
                <h5 class="modal-title" style="color: #fff;">Chọn Dịch Vụ</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="menu-item-card" id="cardBasic" onclick="chonDichVu('Basic')"
                             style="border: 1px solid #444; padding: 15px; border-radius: 8px; cursor: pointer;">
                            <h5 style="color: #cda45e;">Combo Cơ Bản</h5>
                            <p>15.000.000 VNĐ</p>
                            <p class="text-muted" style="font-size: 12px;">(Backdrop, bàn ghế tiêu chuẩn)</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="menu-item-card" id="cardVIP" onclick="chonDichVu('VIP')"
                             style="border: 1px solid #444; padding: 15px; border-radius: 8px; cursor: pointer;">
                            <h5 style="color: #cda45e;">Combo VIP</h5>
                            <p>50.000.000 VNĐ</p>
                            <p class="text-muted" style="font-size: 12px;">(Hoa tươi, đèn LED, sân khấu 3D)</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top-color: rgba(255, 255, 255, 0.1);">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" style="background-color: #cda45e; border: none;">Xác nhận</button>
            </div>
        </div>
    </div>
</div>

<style>
    .book-a-table .php-email-form .btn-chon-modal {
        text-align: left; font-weight: 400; font-size: 14px; padding: 10px 15px;
        color: rgba(255, 255, 255, 0.7); background-color: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 0;
    }
    .book-a-table .php-email-form .btn-chon-modal:hover {
        border-color: #cda45e;
    }
    .menu-item-card:hover { border-color: #cda45e !important; }
    .menu-item-card.selected { background-color: rgba(205, 164, 94, 0.1); border-color: #cda45e !important; }
</style>

<script>
    function chonThucDon(loaiMenu) {
        // 1. Gán giá trị vào input ẩn để gửi về Server
        document.getElementById('inputLoaiThucDon').value = loaiMenu;

        // 2. Đổi màu giao diện để người dùng biết đã chọn
        // Reset màu cũ
        document.getElementById('cardVang').style.backgroundColor = "transparent";
        document.getElementById('cardBachKim').style.backgroundColor = "transparent";

        // Highlight cái đang chọn
        if (loaiMenu === 'Vàng') {
            document.getElementById('cardVang').style.backgroundColor = "rgba(205, 164, 94, 0.2)";
        } else {
            document.getElementById('cardBachKim').style.backgroundColor = "rgba(205, 164, 94, 0.2)";
        }

        // 3. Cập nhật text nút bấm bên ngoài cho đẹp
        document.querySelector('.btn-chon-modal').innerText = "Đã chọn: Thực Đơn " + loaiMenu;

        // 4. Tự động đóng modal (tùy chọn, ở đây tôi để mở để khách bấm Xác nhận)
    }
        function chonDichVu(loaiDV) {
        // 1. Gán giá trị vào input ẩn
        document.getElementById('inputLoaiDichVu').value = loaiDV;

        // 2. Đổi màu giao diện (Highlight cái được chọn)
        document.getElementById('cardBasic').style.backgroundColor = "transparent";
        document.getElementById('cardVIP').style.backgroundColor = "transparent";

        if (loaiDV === 'Basic') {
            document.getElementById('cardBasic').style.backgroundColor = "rgba(205, 164, 94, 0.2)";
        } else {
            document.getElementById('cardVIP').style.backgroundColor = "rgba(205, 164, 94, 0.2)";
        }

        // 3. Cập nhật text nút bấm ngoài form
        // Tìm nút thứ 2 trong nhóm nút (nút Chọn Dịch Vụ)
        document.querySelectorAll('.btn-chon-modal')[1].innerText = "Đã chọn: Combo " + loaiDV;
    }
</script>